{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\julia\\\\Desktop\\\\geo\\\\geo\\\\src\\\\pages\\\\Learn.js\";\nimport React, { Component } from 'react';\nimport { ReactComponent as Map } from \"@svgr/webpack?-svgo,+titleProp,+ref!../components/Map.svg\";\nimport list from '../components/list.json';\nimport _ from 'lodash';\nimport Head from '../components/Head.js';\nexport default class Learn extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      current: {},\n      data: [],\n      curData: [],\n      curTest: [],\n      status: '',\n      test: false\n    };\n    this.map = React.createRef();\n    this.handleClick = this.handleClick.bind(this);\n    this.handleChoose = this.handleChoose.bind(this);\n    this.handleStart = this.handleStart.bind(this);\n  }\n\n  startLearn() {\n    console.log('startlearn');\n\n    if (this.state.curData.length < 1) {\n      this.handleStart();\n      return;\n    }\n\n    var i;\n    var min = 0;\n    var max = 1;\n    min = this.state.curData[0].id;\n    max = this.state.curData.length + min;\n    i = parseInt(Math.random() * (max - min) + min);\n    i = i - min;\n    this.setState({\n      current: {\n        id: this.state.curData[i].id,\n        name: this.state.curData[i].name\n      }\n    }, () => document.getElementById(this.state.current.id).classList.add(\"right\"));\n    this.state.curData.splice(i, 1);\n  }\n\n  handleStart() {\n    console.log('handlestart');\n\n    if (this.state.data.length < 1) {\n      this.setState({\n        current: {\n          name: \"\"\n        }\n      });\n      return;\n    }\n\n    var a = document.getElementsByClassName(\"right\");\n\n    for (var i = a.length - 1; i >= 0; i--) {\n      a[i].classList.remove('right');\n    } // console.log(JSON.stringify(this.state.data));\n\n\n    var k = Math.random() * (this.state.data.length - 5);\n    var t = this.state.data.splice(k, 5); // console.log(JSON.stringify(t));\n\n    this.setState({\n      curData: t,\n      curTest: _.cloneDeep(t),\n      test: false\n    }, this.startLearn);\n  }\n\n  startTest() {\n    console.log('starttest');\n    var i;\n    var min = 0;\n    var max = 1;\n\n    if (this.state.curTest.length < 1) {\n      this.handleStart();\n    } else {\n      min = this.state.curTest[0].id;\n      max = this.state.curTest.length + min;\n      i = parseInt(Math.random() * (max - min) + min);\n      i = i - min;\n      this.setState({\n        current: {\n          id: this.state.curTest[i].id,\n          name: this.state.curTest[i].name,\n          try: 0\n        }\n      });\n      this.state.curTest.splice(i, 1);\n    }\n  }\n\n  handleClick(event) {\n    console.log('handleclick');\n    var layer = event.target.parentElement.getAttribute(\"id\");\n\n    if (!this.state.current.id) {\n      return;\n    }\n\n    if (layer !== document.getElementsByClassName(\"chosen\")[0].getAttribute(\"class\").split(\" \")[0]) {\n      return;\n    }\n\n    if (!this.state.test) {\n      if (parseInt(event.target.getAttribute(\"id\")) === this.state.current.id) {\n        event.target.classList.remove('right');\n\n        if (this.state.curData.length > 0) {\n          this.startLearn();\n        } else {\n          this.setState({\n            test: true\n          }, this.startTest);\n        }\n      }\n    } else {\n      if (parseInt(event.target.getAttribute(\"id\")) !== this.state.current.id) {\n        if (!event.target.classList.contains(\"right\")) {\n          this.setState({\n            current: {\n              id: this.state.current.id,\n              name: this.state.current.name,\n              try: this.state.current.try + 1\n            }\n          }, this.checkTry);\n        }\n\n        event.target.classList.add('wrong');\n        return;\n      } else {\n        event.target.classList.add('right');\n        var a = document.getElementsByClassName(\"wrong\");\n\n        for (var i = a.length - 1; i >= 0; i--) {\n          a[i].classList.remove('wrong');\n        }\n\n        this.startTest();\n      }\n    }\n  }\n\n  checkTry() {\n    if (this.state.current.try > 3) {\n      this.setState({\n        data: this.state.data.concat([this.state.current])\n      }, () => {\n        var a = document.getElementsByClassName(\"wrong\");\n\n        for (var i = a.length - 1; i >= 0; i--) {\n          a[i].classList.remove('wrong');\n        }\n\n        this.startTest();\n      });\n    }\n  }\n\n  handleChoose(event) {\n    var cur = event.target.className;\n    var prev;\n\n    if (document.getElementsByClassName(\"chosen\")[0]) {\n      prev = document.getElementsByClassName(\"chosen\")[0];\n\n      if (event.target.classList.contains(prev.getAttribute(\"class\").split(\" \")[0])) {\n        return;\n      }\n\n      var b = document.getElementsByClassName(\"right\");\n\n      for (var j = b.length - 1; j >= 0; j--) {\n        b[j].classList.remove('right');\n      }\n\n      prev.classList.remove(\"chosen\");\n      prev = prev.getAttribute(\"class\").split(\" \")[0];\n      document.getElementById(prev).style.display = \"none\";\n    }\n\n    document.getElementById(\"region\").style.display = \"inline\";\n    document.getElementById(cur).style.display = \"inline\";\n    document.getElementsByTagName(\"svg\")[0].getElementsByClassName(\"active\")[0].classList.remove(\"active\");\n    document.getElementsByTagName(\"svg\")[0].getElementById(cur).classList.add(\"active\");\n    event.target.classList.add(\"chosen\");\n\n    var clone = _.cloneDeep(list);\n\n    clone = clone[cur];\n    this.setState({\n      data: clone\n    }, this.handleStart);\n  }\n\n  render() {\n    return (\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 4\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Head, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 5\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        id: \"body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 5\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        id: \"content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 6\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 6\n        }\n      }, \"\\u0418\\u0440\\u043A\\u0443\\u0442\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\"),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        id: \"map\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 7\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Map, {\n        ref: this.map,\n        onClick: this.handleClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 8\n        }\n      }))),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        id: \"side\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 6\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"ul\", {\n        id: \"layers\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 7\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"li\", {\n        className: \"region\",\n        onClick: this.handleChoose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 8\n        }\n      }, \"\\u0420\\u0430\\u0439\\u043E\\u043D\\u044B\"),\n      /*#__PURE__*/\n      React.createElement(\"li\", {\n        className: \"city\",\n        onClick: this.handleChoose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 8\n        }\n      }, \"\\u0413\\u043E\\u0440\\u043E\\u0434\\u0430\"),\n      /*#__PURE__*/\n      React.createElement(\"li\", {\n        className: \"river\",\n        onClick: this.handleChoose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 8\n        }\n      }, \"\\u0420\\u0435\\u043A\\u0438\"),\n      /*#__PURE__*/\n      React.createElement(\"li\", {\n        className: \"place\",\n        onClick: this.handleChoose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 8\n        }\n      }, \"\\u041C\\u0435\\u0441\\u0442\\u0430\")),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 7\n        }\n      }, this.state.current.id == null ?\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 42\n        }\n      }, \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0441\\u043B\\u043E\\u0439\") :\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 71\n        }\n      }, this.state.test ?\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 6\n        }\n      }, \"\\u041D\\u0430\\u0439\\u0434\\u0438\\u0442\\u0435 \\u0437\\u0430\\u0434\\u0430\\u043D\\u043D\\u044B\\u0439 \\u043E\\u0431\\u044A\\u0435\\u043A\\u0442: \",\n      /*#__PURE__*/\n      React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 36\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 10\n        }\n      }, this.state.current.name),\n      /*#__PURE__*/\n      React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 48\n        }\n      }), \"\\u041F\\u043E\\u043F\\u044B\\u0442\\u043E\\u043A: \", this.state.current.try,\n      /*#__PURE__*/\n      React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 43\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 48\n        }\n      }), \"\\u041F\\u043E\\u0441\\u043B\\u0435 4 \\u043D\\u0435\\u0443\\u0434\\u0430\\u0447\\u043D\\u044B\\u0445 \\u043F\\u043E\\u043F\\u044B\\u0442\\u043E\\u043A \\u043E\\u0431\\u044A\\u0435\\u043A\\u0442 \\u0431\\u0443\\u0434\\u0435\\u0442 \\u043F\\u043E\\u043A\\u0430\\u0437\\u0430\\u043D \\u043F\\u043E\\u0432\\u0442\\u043E\\u0440\\u043D\\u043E.\") :\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 6\n        }\n      }, \"\\u0417\\u0430\\u043F\\u043E\\u043C\\u043D\\u0438\\u0442\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0438 \\u0440\\u0430\\u0441\\u043F\\u043E\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435: \", this.state.current.name,\n      /*#__PURE__*/\n      React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 71\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 76\n        }\n      }), \"\\u0414\\u043B\\u044F \\u043F\\u0440\\u043E\\u0434\\u043E\\u043B\\u0436\\u0435\\u043D\\u0438\\u044F \\u043D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 \\u043D\\u0430 \\u0437\\u0430\\u0434\\u0430\\u043D\\u043D\\u043E\\u0435 \\u043C\\u0435\\u0441\\u0442\\u043E \\u043D\\u0430 \\u043A\\u0430\\u0440\\u0442\\u0435.\")), this.state.status))))\n    );\n  }\n\n}","map":{"version":3,"sources":["C:/Users/julia/Desktop/geo/geo/src/pages/Learn.js"],"names":["React","Component","list","_","Head","Learn","constructor","props","state","current","data","curData","curTest","status","test","map","createRef","handleClick","bind","handleChoose","handleStart","startLearn","console","log","length","i","min","max","id","parseInt","Math","random","setState","name","document","getElementById","classList","add","splice","a","getElementsByClassName","remove","k","t","cloneDeep","startTest","try","event","layer","target","parentElement","getAttribute","split","contains","checkTry","concat","cur","className","prev","b","j","style","display","getElementsByTagName","clone","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;AAEA,OAAOC,IAAP,MAAiB,yBAAjB;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,OAAOC,IAAP,MAAiB,uBAAjB;AAEA,eAAe,MAAMC,KAAN,SAAoBJ,SAApB,CAA8B;AAC5CK,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAClB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACZC,MAAAA,OAAO,EAAE,EADG;AAEZC,MAAAA,IAAI,EAAE,EAFM;AAGZC,MAAAA,OAAO,EAAE,EAHG;AAIZC,MAAAA,OAAO,EAAE,EAJG;AAKZC,MAAAA,MAAM,EAAE,EALI;AAMZC,MAAAA,IAAI,EAAE;AANM,KAAb;AAQA,SAAKC,GAAL,GAAWf,KAAK,CAACgB,SAAN,EAAX;AACA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBD,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKE,WAAL,GAAmB,KAAKA,WAAL,CAAiBF,IAAjB,CAAsB,IAAtB,CAAnB;AACA;;AAEDG,EAAAA,UAAU,GAAG;AAEZC,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;;AACA,QAAI,KAAKf,KAAL,CAAWG,OAAX,CAAmBa,MAAnB,GAA4B,CAAhC,EAAmC;AAClC,WAAKJ,WAAL;AACA;AACA;;AACD,QAAIK,CAAJ;AACA,QAAIC,GAAG,GAAG,CAAV;AACA,QAAIC,GAAG,GAAG,CAAV;AAEAD,IAAAA,GAAG,GAAG,KAAKlB,KAAL,CAAWG,OAAX,CAAmB,CAAnB,EAAsBiB,EAA5B;AACAD,IAAAA,GAAG,GAAG,KAAKnB,KAAL,CAAWG,OAAX,CAAmBa,MAAnB,GAA4BE,GAAlC;AACAD,IAAAA,CAAC,GAAGI,QAAQ,CAACC,IAAI,CAACC,MAAL,MAAiBJ,GAAG,GAAGD,GAAvB,IAA8BA,GAA/B,CAAZ;AACAD,IAAAA,CAAC,GAAGA,CAAC,GAAGC,GAAR;AACA,SAAKM,QAAL,CAAc;AACbvB,MAAAA,OAAO,EAAE;AACRmB,QAAAA,EAAE,EAAE,KAAKpB,KAAL,CAAWG,OAAX,CAAmBc,CAAnB,EAAsBG,EADlB;AAERK,QAAAA,IAAI,EAAE,KAAKzB,KAAL,CAAWG,OAAX,CAAmBc,CAAnB,EAAsBQ;AAFpB;AADI,KAAd,EAKG,MAAMC,QAAQ,CAACC,cAAT,CAAwB,KAAK3B,KAAL,CAAWC,OAAX,CAAmBmB,EAA3C,EAA+CQ,SAA/C,CAAyDC,GAAzD,CAA6D,OAA7D,CALT;AAMA,SAAK7B,KAAL,CAAWG,OAAX,CAAmB2B,MAAnB,CAA0Bb,CAA1B,EAA6B,CAA7B;AACA;;AAEDL,EAAAA,WAAW,GAAG;AACbE,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;;AACA,QAAI,KAAKf,KAAL,CAAWE,IAAX,CAAgBc,MAAhB,GAAyB,CAA7B,EAAgC;AAC/B,WAAKQ,QAAL,CAAc;AACbvB,QAAAA,OAAO,EAAE;AACRwB,UAAAA,IAAI,EAAE;AADE;AADI,OAAd;AAKA;AACA;;AAED,QAAIM,CAAC,GAAGL,QAAQ,CAACM,sBAAT,CAAgC,OAAhC,CAAR;;AACA,SAAK,IAAIf,CAAC,GAAGc,CAAC,CAACf,MAAF,GAAW,CAAxB,EAA2BC,CAAC,IAAI,CAAhC,EAAmCA,CAAC,EAApC,EAAwC;AACvCc,MAAAA,CAAC,CAACd,CAAD,CAAD,CAAKW,SAAL,CAAeK,MAAf,CAAsB,OAAtB;AACA,KAdY,CAeb;;;AACA,QAAIC,CAAC,GAAGZ,IAAI,CAACC,MAAL,MAAiB,KAAKvB,KAAL,CAAWE,IAAX,CAAgBc,MAAhB,GAAyB,CAA1C,CAAR;AACA,QAAImB,CAAC,GAAG,KAAKnC,KAAL,CAAWE,IAAX,CAAgB4B,MAAhB,CAAuBI,CAAvB,EAA0B,CAA1B,CAAR,CAjBa,CAkBb;;AAEA,SAAKV,QAAL,CAAc;AACbrB,MAAAA,OAAO,EAAEgC,CADI;AAEb/B,MAAAA,OAAO,EAAET,CAAC,CAACyC,SAAF,CAAYD,CAAZ,CAFI;AAGb7B,MAAAA,IAAI,EAAE;AAHO,KAAd,EAIG,KAAKO,UAJR;AAKA;;AAEDwB,EAAAA,SAAS,GAAG;AACXvB,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACA,QAAIE,CAAJ;AACA,QAAIC,GAAG,GAAG,CAAV;AACA,QAAIC,GAAG,GAAG,CAAV;;AACA,QAAI,KAAKnB,KAAL,CAAWI,OAAX,CAAmBY,MAAnB,GAA4B,CAAhC,EAAmC;AAClC,WAAKJ,WAAL;AACA,KAFD,MAEO;AACNM,MAAAA,GAAG,GAAG,KAAKlB,KAAL,CAAWI,OAAX,CAAmB,CAAnB,EAAsBgB,EAA5B;AACAD,MAAAA,GAAG,GAAG,KAAKnB,KAAL,CAAWI,OAAX,CAAmBY,MAAnB,GAA4BE,GAAlC;AACAD,MAAAA,CAAC,GAAGI,QAAQ,CAACC,IAAI,CAACC,MAAL,MAAiBJ,GAAG,GAAGD,GAAvB,IAA8BA,GAA/B,CAAZ;AACAD,MAAAA,CAAC,GAAGA,CAAC,GAAGC,GAAR;AACA,WAAKM,QAAL,CAAc;AACbvB,QAAAA,OAAO,EAAE;AACRmB,UAAAA,EAAE,EAAE,KAAKpB,KAAL,CAAWI,OAAX,CAAmBa,CAAnB,EAAsBG,EADlB;AAERK,UAAAA,IAAI,EAAE,KAAKzB,KAAL,CAAWI,OAAX,CAAmBa,CAAnB,EAAsBQ,IAFpB;AAGRa,UAAAA,GAAG,EAAE;AAHG;AADI,OAAd;AAOA,WAAKtC,KAAL,CAAWI,OAAX,CAAmB0B,MAAnB,CAA0Bb,CAA1B,EAA6B,CAA7B;AACA;AACD;;AAEDR,EAAAA,WAAW,CAAC8B,KAAD,EAAQ;AAClBzB,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACA,QAAIyB,KAAK,GAAGD,KAAK,CAACE,MAAN,CAAaC,aAAb,CAA2BC,YAA3B,CAAwC,IAAxC,CAAZ;;AACA,QAAI,CAAC,KAAK3C,KAAL,CAAWC,OAAX,CAAmBmB,EAAxB,EAA4B;AAC3B;AACA;;AACD,QAAIoB,KAAK,KAAKd,QAAQ,CAACM,sBAAT,CAAgC,QAAhC,EAA0C,CAA1C,EAA6CW,YAA7C,CAA0D,OAA1D,EAAmEC,KAAnE,CAAyE,GAAzE,EAA8E,CAA9E,CAAd,EAAgG;AAC/F;AACA;;AACD,QAAI,CAAC,KAAK5C,KAAL,CAAWM,IAAhB,EAAsB;AACrB,UAAIe,QAAQ,CAACkB,KAAK,CAACE,MAAN,CAAaE,YAAb,CAA0B,IAA1B,CAAD,CAAR,KAA8C,KAAK3C,KAAL,CAAWC,OAAX,CAAmBmB,EAArE,EAAyE;AACxEmB,QAAAA,KAAK,CAACE,MAAN,CAAab,SAAb,CAAuBK,MAAvB,CAA8B,OAA9B;;AACA,YAAI,KAAKjC,KAAL,CAAWG,OAAX,CAAmBa,MAAnB,GAA4B,CAAhC,EAAmC;AAClC,eAAKH,UAAL;AACA,SAFD,MAEO;AACN,eAAKW,QAAL,CAAc;AACblB,YAAAA,IAAI,EAAE;AADO,WAAd,EAEG,KAAK+B,SAFR;AAGA;AACD;AACD,KAXD,MAWO;AACN,UAAIhB,QAAQ,CAACkB,KAAK,CAACE,MAAN,CAAaE,YAAb,CAA0B,IAA1B,CAAD,CAAR,KAA8C,KAAK3C,KAAL,CAAWC,OAAX,CAAmBmB,EAArE,EAAyE;AACxE,YAAI,CAACmB,KAAK,CAACE,MAAN,CAAab,SAAb,CAAuBiB,QAAvB,CAAgC,OAAhC,CAAL,EAA+C;AAC9C,eAAKrB,QAAL,CAAc;AACbvB,YAAAA,OAAO,EAAE;AACRmB,cAAAA,EAAE,EAAE,KAAKpB,KAAL,CAAWC,OAAX,CAAmBmB,EADf;AAERK,cAAAA,IAAI,EAAE,KAAKzB,KAAL,CAAWC,OAAX,CAAmBwB,IAFjB;AAGRa,cAAAA,GAAG,EAAE,KAAKtC,KAAL,CAAWC,OAAX,CAAmBqC,GAAnB,GAAyB;AAHtB;AADI,WAAd,EAMG,KAAKQ,QANR;AAOA;;AACDP,QAAAA,KAAK,CAACE,MAAN,CAAab,SAAb,CAAuBC,GAAvB,CAA2B,OAA3B;AACA;AACA,OAZD,MAYO;AACNU,QAAAA,KAAK,CAACE,MAAN,CAAab,SAAb,CAAuBC,GAAvB,CAA2B,OAA3B;AACA,YAAIE,CAAC,GAAGL,QAAQ,CAACM,sBAAT,CAAgC,OAAhC,CAAR;;AACA,aAAK,IAAIf,CAAC,GAAGc,CAAC,CAACf,MAAF,GAAW,CAAxB,EAA2BC,CAAC,IAAI,CAAhC,EAAmCA,CAAC,EAApC,EAAwC;AACvCc,UAAAA,CAAC,CAACd,CAAD,CAAD,CAAKW,SAAL,CAAeK,MAAf,CAAsB,OAAtB;AACA;;AACD,aAAKI,SAAL;AACA;AACD;AACD;;AACDS,EAAAA,QAAQ,GAAG;AACV,QAAI,KAAK9C,KAAL,CAAWC,OAAX,CAAmBqC,GAAnB,GAAyB,CAA7B,EAAgC;AAC/B,WAAKd,QAAL,CAAc;AACbtB,QAAAA,IAAI,EAAE,KAAKF,KAAL,CAAWE,IAAX,CAAgB6C,MAAhB,CAAuB,CAAC,KAAK/C,KAAL,CAAWC,OAAZ,CAAvB;AADO,OAAd,EAEG,MAAM;AACR,YAAI8B,CAAC,GAAGL,QAAQ,CAACM,sBAAT,CAAgC,OAAhC,CAAR;;AACA,aAAK,IAAIf,CAAC,GAAGc,CAAC,CAACf,MAAF,GAAW,CAAxB,EAA2BC,CAAC,IAAI,CAAhC,EAAmCA,CAAC,EAApC,EAAwC;AACvCc,UAAAA,CAAC,CAACd,CAAD,CAAD,CAAKW,SAAL,CAAeK,MAAf,CAAsB,OAAtB;AACA;;AACD,aAAKI,SAAL;AACA,OARD;AASA;AACD;;AAGD1B,EAAAA,YAAY,CAAC4B,KAAD,EAAQ;AACnB,QAAIS,GAAG,GAAGT,KAAK,CAACE,MAAN,CAAaQ,SAAvB;AACA,QAAIC,IAAJ;;AACA,QAAIxB,QAAQ,CAACM,sBAAT,CAAgC,QAAhC,EAA0C,CAA1C,CAAJ,EAAkD;AACjDkB,MAAAA,IAAI,GAAGxB,QAAQ,CAACM,sBAAT,CAAgC,QAAhC,EAA0C,CAA1C,CAAP;;AACA,UAAIO,KAAK,CAACE,MAAN,CAAab,SAAb,CAAuBiB,QAAvB,CAAgCK,IAAI,CAACP,YAAL,CAAkB,OAAlB,EAA2BC,KAA3B,CAAiC,GAAjC,EAAsC,CAAtC,CAAhC,CAAJ,EAA+E;AAC9E;AACA;;AACD,UAAIO,CAAC,GAAGzB,QAAQ,CAACM,sBAAT,CAAgC,OAAhC,CAAR;;AACA,WAAK,IAAIoB,CAAC,GAAGD,CAAC,CAACnC,MAAF,GAAW,CAAxB,EAA2BoC,CAAC,IAAI,CAAhC,EAAmCA,CAAC,EAApC,EAAwC;AACvCD,QAAAA,CAAC,CAACC,CAAD,CAAD,CAAKxB,SAAL,CAAeK,MAAf,CAAsB,OAAtB;AACA;;AACDiB,MAAAA,IAAI,CAACtB,SAAL,CAAeK,MAAf,CAAsB,QAAtB;AACAiB,MAAAA,IAAI,GAAGA,IAAI,CAACP,YAAL,CAAkB,OAAlB,EAA2BC,KAA3B,CAAiC,GAAjC,EAAsC,CAAtC,CAAP;AACAlB,MAAAA,QAAQ,CAACC,cAAT,CAAwBuB,IAAxB,EAA8BG,KAA9B,CAAoCC,OAApC,GAA8C,MAA9C;AACA;;AACD5B,IAAAA,QAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkC0B,KAAlC,CAAwCC,OAAxC,GAAkD,QAAlD;AACA5B,IAAAA,QAAQ,CAACC,cAAT,CAAwBqB,GAAxB,EAA6BK,KAA7B,CAAmCC,OAAnC,GAA6C,QAA7C;AACA5B,IAAAA,QAAQ,CAAC6B,oBAAT,CAA8B,KAA9B,EAAqC,CAArC,EAAwCvB,sBAAxC,CAA+D,QAA/D,EAAyE,CAAzE,EAA4EJ,SAA5E,CAAsFK,MAAtF,CAA6F,QAA7F;AACAP,IAAAA,QAAQ,CAAC6B,oBAAT,CAA8B,KAA9B,EAAqC,CAArC,EAAwC5B,cAAxC,CAAuDqB,GAAvD,EAA4DpB,SAA5D,CAAsEC,GAAtE,CAA0E,QAA1E;AACAU,IAAAA,KAAK,CAACE,MAAN,CAAab,SAAb,CAAuBC,GAAvB,CAA2B,QAA3B;;AACA,QAAI2B,KAAK,GAAG7D,CAAC,CAACyC,SAAF,CAAY1C,IAAZ,CAAZ;;AACA8D,IAAAA,KAAK,GAAGA,KAAK,CAACR,GAAD,CAAb;AACA,SAAKxB,QAAL,CAAc;AACbtB,MAAAA,IAAI,EAAEsD;AADO,KAAd,EAEG,KAAK5C,WAFR;AAGA;;AAED6C,EAAAA,MAAM,GAAG;AACR;AAAA;AACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACC,0BAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD;AAAA;AAEC;AAAK,QAAA,EAAE,EAAC,MAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACC;AAAK,QAAA,EAAE,EAAC,SAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6GADA;AAAA;AAEC;AAAK,QAAA,EAAE,EAAC,KAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACC,0BAAC,GAAD;AAAK,QAAA,GAAG,EAAE,KAAKlD,GAAf;AAAoB,QAAA,OAAO,EAAE,KAAKE,WAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,CAFD,CADD;AAAA;AAOC;AAAK,QAAA,EAAE,EAAC,MAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACC;AAAI,QAAA,EAAE,EAAC,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACC;AAAI,QAAA,SAAS,EAAC,QAAd;AAAuB,QAAA,OAAO,EAAE,KAAKE,YAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDADD;AAAA;AAEC;AAAI,QAAA,SAAS,EAAC,MAAd;AAAqB,QAAA,OAAO,EAAE,KAAKA,YAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDAFD;AAAA;AAGC;AAAI,QAAA,SAAS,EAAC,OAAd;AAAsB,QAAA,OAAO,EAAE,KAAKA,YAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAHD;AAAA;AAIC;AAAI,QAAA,SAAS,EAAC,OAAd;AAAsB,QAAA,OAAO,EAAE,KAAKA,YAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAJD,CADD;AAAA;AAOC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,KAAKX,KAAL,CAAWC,OAAX,CAAmBmB,EAAnB,IAAyB,IAAzB;AAAA;AAAiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qFAAjC;AAAA;AAA8D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAC9D,KAAKpB,KAAL,CAAWM,IAAX;AAAA;AACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA9B;AAAA;AACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAO,KAAKN,KAAL,CAAWC,OAAX,CAAmBwB,IAA1B,CADJ;AAAA;AAC0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAD1C,kDAEc,KAAKzB,KAAL,CAAWC,OAAX,CAAmBqC,GAFjC;AAAA;AAEqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFrC;AAAA;AAE0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAF1C,wSADG;AAAA;AAKH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sMAAyC,KAAKtC,KAAL,CAAWC,OAAX,CAAmBwB,IAA5D;AAAA;AAAiE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAjE;AAAA;AAAsE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAtE,+QANiE,CADhE,EASG,KAAKzB,KAAL,CAAWK,MATd,CAPD,CAPD,CAFD;AADD;AAgCA;;AAlN2C","sourcesContent":["import React, { Component } from 'react';\r\nimport { ReactComponent as Map } from '../components/Map.svg';\r\nimport list from '../components/list.json';\r\nimport _ from 'lodash';\r\nimport Head from '../components/Head.js'\r\n\r\nexport default class Learn extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tcurrent: {},\r\n\t\t\tdata: [],\r\n\t\t\tcurData: [],\r\n\t\t\tcurTest: [],\r\n\t\t\tstatus: '',\r\n\t\t\ttest: false\r\n\t\t};\r\n\t\tthis.map = React.createRef();\r\n\t\tthis.handleClick = this.handleClick.bind(this);\r\n\t\tthis.handleChoose = this.handleChoose.bind(this);\r\n\t\tthis.handleStart = this.handleStart.bind(this);\r\n\t}\r\n\r\n\tstartLearn() {\r\n\r\n\t\tconsole.log('startlearn');\r\n\t\tif (this.state.curData.length < 1) {\r\n\t\t\tthis.handleStart();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar i;\r\n\t\tvar min = 0;\r\n\t\tvar max = 1;\r\n\r\n\t\tmin = this.state.curData[0].id;\r\n\t\tmax = this.state.curData.length + min;\r\n\t\ti = parseInt(Math.random() * (max - min) + min);\r\n\t\ti = i - min;\r\n\t\tthis.setState({\r\n\t\t\tcurrent: {\r\n\t\t\t\tid: this.state.curData[i].id,\r\n\t\t\t\tname: this.state.curData[i].name\r\n\t\t\t}\r\n\t\t}, () => document.getElementById(this.state.current.id).classList.add(\"right\"));\r\n\t\tthis.state.curData.splice(i, 1);\r\n\t}\r\n\r\n\thandleStart() {\r\n\t\tconsole.log('handlestart');\r\n\t\tif (this.state.data.length < 1) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tcurrent: {\r\n\t\t\t\t\tname: \"\"\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar a = document.getElementsByClassName(\"right\");\r\n\t\tfor (var i = a.length - 1; i >= 0; i--) {\r\n\t\t\ta[i].classList.remove('right');\r\n\t\t}\r\n\t\t// console.log(JSON.stringify(this.state.data));\r\n\t\tvar k = Math.random() * (this.state.data.length - 5);\r\n\t\tvar t = this.state.data.splice(k, 5);\r\n\t\t// console.log(JSON.stringify(t));\r\n\r\n\t\tthis.setState({\r\n\t\t\tcurData: t,\r\n\t\t\tcurTest: _.cloneDeep(t),\r\n\t\t\ttest: false\r\n\t\t}, this.startLearn);\r\n\t}\r\n\r\n\tstartTest() {\r\n\t\tconsole.log('starttest');\r\n\t\tvar i;\r\n\t\tvar min = 0;\r\n\t\tvar max = 1;\r\n\t\tif (this.state.curTest.length < 1) {\r\n\t\t\tthis.handleStart();\r\n\t\t} else {\r\n\t\t\tmin = this.state.curTest[0].id;\r\n\t\t\tmax = this.state.curTest.length + min;\r\n\t\t\ti = parseInt(Math.random() * (max - min) + min);\r\n\t\t\ti = i - min;\r\n\t\t\tthis.setState({\r\n\t\t\t\tcurrent: {\r\n\t\t\t\t\tid: this.state.curTest[i].id,\r\n\t\t\t\t\tname: this.state.curTest[i].name,\r\n\t\t\t\t\ttry: 0\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.state.curTest.splice(i, 1);\r\n\t\t}\r\n\t}\r\n\r\n\thandleClick(event) {\r\n\t\tconsole.log('handleclick');\r\n\t\tvar layer = event.target.parentElement.getAttribute(\"id\");\r\n\t\tif (!this.state.current.id) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (layer !== document.getElementsByClassName(\"chosen\")[0].getAttribute(\"class\").split(\" \")[0]) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!this.state.test) {\r\n\t\t\tif (parseInt(event.target.getAttribute(\"id\")) === this.state.current.id) {\r\n\t\t\t\tevent.target.classList.remove('right');\r\n\t\t\t\tif (this.state.curData.length > 0) {\r\n\t\t\t\t\tthis.startLearn();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\ttest: true\r\n\t\t\t\t\t}, this.startTest)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (parseInt(event.target.getAttribute(\"id\")) !== this.state.current.id) {\r\n\t\t\t\tif (!event.target.classList.contains(\"right\")) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tcurrent: {\r\n\t\t\t\t\t\t\tid: this.state.current.id,\r\n\t\t\t\t\t\t\tname: this.state.current.name,\r\n\t\t\t\t\t\t\ttry: this.state.current.try + 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, this.checkTry);\r\n\t\t\t\t}\r\n\t\t\t\tevent.target.classList.add('wrong');\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tevent.target.classList.add('right');\r\n\t\t\t\tvar a = document.getElementsByClassName(\"wrong\");\r\n\t\t\t\tfor (var i = a.length - 1; i >= 0; i--) {\r\n\t\t\t\t\ta[i].classList.remove('wrong');\r\n\t\t\t\t}\r\n\t\t\t\tthis.startTest();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tcheckTry() {\r\n\t\tif (this.state.current.try > 3) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tdata: this.state.data.concat([this.state.current])\r\n\t\t\t}, () => {\r\n\t\t\t\tvar a = document.getElementsByClassName(\"wrong\");\r\n\t\t\t\tfor (var i = a.length - 1; i >= 0; i--) {\r\n\t\t\t\t\ta[i].classList.remove('wrong');\r\n\t\t\t\t}\r\n\t\t\t\tthis.startTest();\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\r\n\thandleChoose(event) {\r\n\t\tvar cur = event.target.className;\r\n\t\tvar prev;\r\n\t\tif (document.getElementsByClassName(\"chosen\")[0]) {\r\n\t\t\tprev = document.getElementsByClassName(\"chosen\")[0];\r\n\t\t\tif (event.target.classList.contains(prev.getAttribute(\"class\").split(\" \")[0])) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar b = document.getElementsByClassName(\"right\");\r\n\t\t\tfor (var j = b.length - 1; j >= 0; j--) {\r\n\t\t\t\tb[j].classList.remove('right');\r\n\t\t\t}\r\n\t\t\tprev.classList.remove(\"chosen\");\r\n\t\t\tprev = prev.getAttribute(\"class\").split(\" \")[0];\r\n\t\t\tdocument.getElementById(prev).style.display = \"none\";\r\n\t\t}\r\n\t\tdocument.getElementById(\"region\").style.display = \"inline\";\r\n\t\tdocument.getElementById(cur).style.display = \"inline\";\r\n\t\tdocument.getElementsByTagName(\"svg\")[0].getElementsByClassName(\"active\")[0].classList.remove(\"active\");\r\n\t\tdocument.getElementsByTagName(\"svg\")[0].getElementById(cur).classList.add(\"active\");\r\n\t\tevent.target.classList.add(\"chosen\");\r\n\t\tvar clone = _.cloneDeep(list);\r\n\t\tclone = clone[cur];\r\n\t\tthis.setState({\r\n\t\t\tdata: clone\r\n\t\t}, this.handleStart);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Head/>\r\n\t\t\t\t<div id=\"body\">\r\n\t\t\t\t\t<div id=\"content\">\r\n\t\t\t\t\t<h2>Иркутская область</h2>\r\n\t\t\t\t\t\t<div id=\"map\">\r\n\t\t\t\t\t\t\t<Map ref={this.map} onClick={this.handleClick} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id=\"side\">\r\n\t\t\t\t\t\t<ul id=\"layers\">\r\n\t\t\t\t\t\t\t<li className=\"region\" onClick={this.handleChoose}>Районы</li>\r\n\t\t\t\t\t\t\t<li className=\"city\" onClick={this.handleChoose}>Города</li>\r\n\t\t\t\t\t\t\t<li className=\"river\" onClick={this.handleChoose}>Реки</li>\r\n\t\t\t\t\t\t\t<li className=\"place\" onClick={this.handleChoose}>Места</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{this.state.current.id == null ? (<div>Выберите слой</div>) : (<div>\r\n\t\t\t\t\t\t\t{this.state.test ?\r\n\t\t\t\t(<div>Найдите заданный объект: <br/>\r\n\t\t\t\t\t\t\t\t\t<span>{this.state.current.name}</span><br/>\r\n\t\t\t\t\t\t\t\t\tПопыток: {this.state.current.try}<br/><br/>\r\n\t\t\t\t\t\t\t\t\tПосле 4 неудачных попыток объект будет показан повторно.</div>) :\r\n\t\t\t\t(<div>Запомните название и расположение: {this.state.current.name}<br/><br/>\r\n\t\t\t\t\t\t\t\tДля продолжения нажмите на заданное место на карте.</div>)}</div>)}\r\n\t\t\t\t\t\t\t\t{this.state.status}\r\n\t\t\t\t\t\t</div>\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t);\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}