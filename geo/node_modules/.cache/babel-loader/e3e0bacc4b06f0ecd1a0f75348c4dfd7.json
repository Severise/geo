{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\julia\\\\Desktop\\\\geo\\\\geo\\\\src\\\\components\\\\Form.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nexport default class Sign extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      login: \"\",\n      password: \"\",\n      role: \"\",\n      loginError: \"\",\n      user: {}\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    axios.post(\"login\", {\n      login: this.state.login,\n      password: this.state.password,\n      role: this.state.role\n    }).then(res => {\n      localStorage.setItem('usertoken', res.data.token);\n      console.log(res.data.user);\n      if (res && res.data.user.class) this.props.history.push(`/student`);else if (res && res.data.user.school) {\n        this.setState({\n          user: res.data.user\n        });\n        this.props.history.push(`/teacher`);\n      }\n    }).catch(error => {\n      this.setState({\n        loginError: \"User not found\"\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: \"sign\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0434\\u043B\\u044F \\u0432\\u0445\\u043E\\u0434\\u0430\"), React.createElement(\"div\", {\n      className: \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, this.state.loginError), React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      user: this.state.user,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, \"\\u0418\\u043C\\u044F\"), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"login\",\n      value: this.state.login,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    })), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"), React.createElement(\"input\", {\n      type: \"password\",\n      name: \"password\",\n      value: this.state.password,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    })), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \"\\u0420\\u043E\\u043B\\u044C\"), React.createElement(\"li\", {\n      id: \"radio\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"radio\",\n      id: \"teach\",\n      name: \"role\",\n      value: \"teacher\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"teach\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, \"\\u0423\\u0447\\u0438\\u0442\\u0435\\u043B\\u044C\"), React.createElement(\"input\", {\n      type: \"radio\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \" / \"), React.createElement(\"input\", {\n      type: \"radio\",\n      id: \"stud\",\n      name: \"role\",\n      value: \"student\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"stud\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"\\u0423\\u0447\\u0435\\u043D\\u0438\\u043A\")), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"\\u0412\\u043E\\u0439\\u0442\\u0438\")))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/julia/Desktop/geo/geo/src/components/Form.js"],"names":["React","Component","axios","Sign","constructor","props","state","login","password","role","loginError","user","handleSubmit","bind","handleChange","event","setState","target","name","value","preventDefault","post","then","res","localStorage","setItem","data","token","console","log","class","history","push","school","catch","error","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\n\r\nexport default class Sign extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tlogin: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t\trole: \"\",\r\n\t\t\tloginError: \"\",\r\n\t\t\tuser:{}\r\n\t\t};\r\n\r\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\r\n\t\tthis.handleChange = this.handleChange.bind(this);\r\n\t}\r\n\r\n\thandleChange(event) {\r\n\t\tthis.setState({\r\n\t\t\t[event.target.name]: event.target.value\r\n\t\t});\r\n\t}\r\n\r\n\r\n\thandleSubmit(event) {\r\n\t\tevent.preventDefault();\r\n\t\taxios\r\n\t\t\t.post(\"login\", {\r\n\t\t\t\tlogin: this.state.login,\r\n\t\t\t\tpassword: this.state.password,\r\n\t\t\t\trole: this.state.role\r\n\t\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tlocalStorage.setItem('usertoken', res.data.token)\r\n\t\t\t\tconsole.log(res.data.user)\r\n\t\t\t\tif (res && res.data.user.class)\r\n\t\t\t\t\tthis.props.history.push(`/student`)\r\n\t\t\t\telse if (res && res.data.user.school){\r\n\t\t\t\t\tthis.setState({user:res.data.user});\r\n\t\t\t\t\tthis.props.history.push(`/teacher`);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tloginError: \"User not found\"\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div id=\"sign\">\r\n\t\t\t\t<label>Введите данные для входа</label>\r\n\t\t\t\t<div className=\"error\">{this.state.loginError}</div>\r\n\t\t\t\t<form  onSubmit={this.handleSubmit} user={this.state.user}>\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t<li><label htmlFor=\"login\">Имя</label>\r\n\t\t\t\t\t\t\t<input type=\"text\" name=\"login\" value={this.state.login} onChange={this.handleChange}/></li>\r\n\t\t\t\t\t\t<li><label htmlFor=\"password\">Пароль</label>\r\n\t\t\t\t\t\t\t<input type=\"password\" name=\"password\" value={this.state.password} onChange={this.handleChange}/></li>\r\n\t\t\t\t\t\t\t<label>Роль</label>\r\n\t\t\t\t\t\t<li id=\"radio\"><input type=\"radio\" id=\"teach\" name=\"role\" value=\"teacher\" onChange={this.handleChange}/>\r\n\t\t\t\t\t\t\t<label htmlFor=\"teach\">Учитель</label>\r\n\t\t\t\t\t\t\t<input type=\"radio\"/>\r\n\t\t\t\t\t\t\t<label> / </label>\r\n\t\t\t\t\t\t\t<input type=\"radio\" id=\"stud\" name=\"role\"  value=\"student\" onChange={this.handleChange}/>\r\n\t\t\t\t\t\t\t<label htmlFor=\"stud\">Ученик</label></li>\r\n\t\t\t\t\t\t<li><button type=\"submit\">Войти</button></li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}