{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\julia\\\\Desktop\\\\geo\\\\geo\\\\src\\\\pages\\\\Login.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport * as jwt_decode from 'jwt-decode';\nimport Head from '../components/Head.js';\nexport default class Sign extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      login: \"\",\n      password: \"\",\n      role: \"teacher\",\n      school: \"\",\n      name: \"\",\n      status: \"\"\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    var radio = document.getElementsByName('form');\n\n    for (var i = 0; i < radio.length; i++) {\n      if (radio[i].checked) {\n        var path = radio[i].id;\n      }\n    }\n\n    if (path === \"signin\") {\n      axios.post(path, {\n        login: this.state.login,\n        password: this.state.password,\n        role: this.state.role\n      }).then(res => {\n        localStorage.setItem('token', res.data);\n        var token = jwt_decode(res.data);\n\n        if (token.class) {\n          this.props.history.push({\n            pathname: `/student`,\n            state: {\n              user: token\n            }\n          });\n        } else if (token.school) {\n          this.props.history.push({\n            pathname: `/teacher`,\n            state: {\n              user: token\n            }\n          });\n        }\n      }).catch(error => {\n        this.setState({\n          status:\n          /*#__PURE__*/\n          React.createElement(\"div\", {\n            className: \"error\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 14\n            }\n          }, \"User not found\")\n        });\n      });\n    } else {\n      axios.post(path, {\n        name: this.state.name,\n        login: this.state.login,\n        password: this.state.password,\n        school: this.state.school\n      }).then(res => {\n        if (res.data.newUser) {\n          this.setState({\n            status:\n            /*#__PURE__*/\n            React.createElement(\"div\", {\n              className: \"success\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 15\n              }\n            }, \"Success registration\")\n          });\n          this.setState({\n            name: \"\",\n            login: \"\",\n            password: \"\",\n            school: \"\"\n          });\n          document.getElementById('signin').checked = true;\n        } else {\n          this.setState({\n            status:\n            /*#__PURE__*/\n            React.createElement(\"div\", {\n              className: \"error\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 15\n              }\n            }, \"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C \\u0443\\u0436\\u0435 \\u0441\\u0443\\u0449\\u0435\\u0441\\u0442\\u0432\\u0443\\u0435\\u0442\")\n          });\n        }\n      }).catch(error => {\n        this.setState({\n          status:\n          /*#__PURE__*/\n          React.createElement(\"div\", {\n            className: \"error\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 14\n            }\n          }, \"Registration error\")\n        });\n      });\n    }\n  }\n\n  render() {\n    return (\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 4\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Head, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 5\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        id: \"form\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 5\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        type: \"radio\",\n        id: \"signin\",\n        name: \"form\",\n        value: \"\",\n        defaultChecked: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 7\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        htmlFor: \"signin\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 7\n        }\n      }, \"\\u0412\\u0445\\u043E\\u0434\"),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        id: \"sign\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 7\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 8\n        }\n      }, \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0434\\u043B\\u044F \\u0432\\u0445\\u043E\\u0434\\u0430\"), this.state.status),\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 7\n        }\n      }, \" / \"),\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        type: \"radio\",\n        id: \"signup\",\n        name: \"form\",\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 7\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        htmlFor: \"signup\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 7\n        }\n      }, \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        id: \"reg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 6\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 7\n        }\n      }, \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\"), this.state.status)))\n    );\n  }\n\n}","map":{"version":3,"sources":["C:/Users/julia/Desktop/geo/geo/src/pages/Login.js"],"names":["React","Component","axios","jwt_decode","Head","Sign","constructor","props","state","login","password","role","school","name","status","handleSubmit","bind","handleChange","event","setState","target","value","preventDefault","radio","document","getElementsByName","i","length","checked","path","id","post","then","res","localStorage","setItem","data","token","class","history","push","pathname","user","catch","error","newUser","getElementById","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport * as jwt_decode from 'jwt-decode';\r\nimport Head from '../components/Head.js'\r\n\r\nexport default class Sign extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tlogin: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t\trole: \"teacher\",\r\n\t\t\tschool: \"\",\r\n\t\t\tname: \"\",\r\n\t\t\tstatus: \"\",\r\n\t\t};\r\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\r\n\t\tthis.handleChange = this.handleChange.bind(this);\r\n\t}\r\n\r\n\thandleChange(event) {\r\n\t\tthis.setState({\r\n\t\t\t[event.target.name]: event.target.value\r\n\t\t});\r\n\t}\r\n\r\n\thandleSubmit(event) {\r\n\t\tevent.preventDefault();\r\n\t\tvar radio = document.getElementsByName('form');\r\n\t\tfor (var i = 0; i < radio.length; i++) {\r\n\t\t\tif (radio[i].checked) {\r\n\t\t\t\tvar path = radio[i].id;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (path === \"signin\") {\r\n\t\t\taxios.post(path, {\r\n\t\t\t\tlogin: this.state.login,\r\n\t\t\t\tpassword: this.state.password,\r\n\t\t\t\trole: this.state.role\r\n\t\t\t}).then(res => {\r\n\t\t\t\tlocalStorage.setItem('token', res.data);\r\n\t\t\t\tvar token = jwt_decode(res.data);\r\n\t\t\t\tif (token.class) {\r\n\t\t\t\t\tthis.props.history.push({\r\n\t\t\t\t\t\tpathname: `/student`,\r\n\t\t\t\t\t\tstate: {\r\n\t\t\t\t\t\t\tuser: token\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (token.school) {\r\n\t\t\t\t\tthis.props.history.push({\r\n\t\t\t\t\t\tpathname: `/teacher`,\r\n\t\t\t\t\t\tstate: {\r\n\t\t\t\t\t\t\tuser: token\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}).catch(error => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tstatus: <div className=\"error\">User not found</div>\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\taxios.post(path, {\r\n\t\t\t\tname: this.state.name,\r\n\t\t\t\tlogin: this.state.login,\r\n\t\t\t\tpassword: this.state.password,\r\n\t\t\t\tschool: this.state.school\r\n\t\t\t}).then(res => {\r\n\t\t\t\tif (res.data.newUser) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tstatus: <div className=\"success\">Success registration</div>\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tname: \"\",\r\n\t\t\t\t\t\tlogin: \"\",\r\n\t\t\t\t\t\tpassword: \"\",\r\n\t\t\t\t\t\tschool: \"\",\r\n\t\t\t\t\t});\r\n\t\t\t\t\tdocument.getElementById('signin').checked = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tstatus: <div className=\"error\">Пользователь уже существует</div>\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}).catch(error => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tstatus: <div className=\"error\">Registration error</div>\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Head/>\r\n\t\t\t\t<div id=\"form\">\r\n\t\t\t\t\t\t<input type=\"radio\" id=\"signin\" name=\"form\" value=\"\" defaultChecked />\r\n\t\t\t\t\t\t<label htmlFor=\"signin\">Вход</label>\r\n\t\t\t\t\t\t<div id=\"sign\">\r\n\t\t\t\t\t\t\t<label>Введите данные для входа</label>\r\n\t\t\t\t\t\t\t{this.state.status}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>  \r\n\t\t\t\t\t\t<label> / </label>\r\n\t\t\t\t\t\t<input type=\"radio\" id=\"signup\" name=\"form\" value=\"\"/>\r\n\t\t\t\t\t\t<label htmlFor=\"signup\">Регистрация</label>\r\n\t\t\t\t\t<div id=\"reg\">\r\n\t\t\t\t\t\t<label>Введите данные</label>\r\n\t\t\t\t\t\t{this.state.status}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t);\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}