{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\julia\\\\Desktop\\\\geo\\\\geo\\\\src\\\\components\\\\Form.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nexport default class Sign extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      login: \"\",\n      password: \"\",\n      role: \"\",\n      loginError: \"\"\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    if (this.state.role == '') {\n      this.setState({\n        loginError: \"Выберите роль\"\n      }); // return;\n    }\n\n    event.preventDefault();\n    axios.post(\"login\", {\n      login: this.state.login,\n      password: this.state.password,\n      role: this.state.role\n    }).then(res => {\n      localStorage.setItem('usertoken', res.data.token);\n      if (res && res.data.user.class) this.props.history.push(`/student`);else if (res && res.data.user.school) {\n        this.props.history.push({\n          pathname: `/teacher`,\n          state: {\n            user: res.data.user\n          }\n        });\n      }\n    }).catch(error => {\n      this.setState({\n        loginError: \"User not found\"\n      });\n    });\n  }\n\n  render() {\n    return (\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        id: \"sign\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 5\n        }\n      }, \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0434\\u043B\\u044F \\u0432\\u0445\\u043E\\u0434\\u0430\"),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"error\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 5\n        }\n      }, this.state.loginError),\n      /*#__PURE__*/\n      React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 5\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"ul\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 6\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 7\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        htmlFor: \"login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }\n      }, \"\\u0418\\u043C\\u044F\"),\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        type: \"text\",\n        name: \"login\",\n        value: this.state.login,\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 8\n        }\n      })),\n      /*#__PURE__*/\n      React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 7\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        htmlFor: \"password\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }\n      }, \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"),\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        value: this.state.password,\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 8\n        }\n      })),\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 8\n        }\n      }, \"\\u0420\\u043E\\u043B\\u044C\"),\n      /*#__PURE__*/\n      React.createElement(\"li\", {\n        id: \"radio\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 7\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        type: \"radio\",\n        id: \"teach\",\n        name: \"role\",\n        value: \"teacher\",\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 22\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        htmlFor: \"teach\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 8\n        }\n      }, \"\\u0423\\u0447\\u0438\\u0442\\u0435\\u043B\\u044C\"),\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        type: \"radio\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 8\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 8\n        }\n      }, \" / \"),\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        type: \"radio\",\n        id: \"stud\",\n        name: \"role\",\n        value: \"student\",\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 8\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        htmlFor: \"stud\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 8\n        }\n      }, \"\\u0423\\u0447\\u0435\\u043D\\u0438\\u043A\")),\n      /*#__PURE__*/\n      React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 7\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"button\", {\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }\n      }, \"\\u0412\\u043E\\u0439\\u0442\\u0438\")))))\n    );\n  }\n\n}","map":{"version":3,"sources":["C:/Users/julia/Desktop/geo/geo/src/components/Form.js"],"names":["React","Component","axios","Sign","constructor","props","state","login","password","role","loginError","handleSubmit","bind","handleChange","event","setState","target","name","value","preventDefault","post","then","res","localStorage","setItem","data","token","user","class","history","push","school","pathname","catch","error","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\n\r\nexport default class Sign extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            login: \"\",\r\n            password: \"\",\r\n            role: \"\",\r\n            loginError: \"\"\r\n        };\r\n\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n    }\r\n\r\n    handleChange(event) {\r\n        this.setState({\r\n            [event.target.name]: event.target.value\r\n        });\r\n    }\r\n\r\n\r\n    handleSubmit(event) {\r\n        if (this.state.role == '') {\r\n            this.setState({ loginError: \"Выберите роль\" });\r\n            // return;\r\n        }\r\n        event.preventDefault();\r\n        axios\r\n            .post(\"login\", {\r\n                login: this.state.login,\r\n                password: this.state.password,\r\n                role: this.state.role\r\n            })\r\n            .then(res => {\r\n                localStorage.setItem('usertoken', res.data.token)\r\n                if (res && res.data.user.class)\r\n                    this.props.history.push(`/student`)\r\n                else if (res && res.data.user.school) {\r\n                    this.props.history.push({\r\n                        pathname: `/teacher`,\r\n                        state: { user: res.data.user }\r\n                    });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                this.setState({\r\n                    loginError: \"User not found\"\r\n                });\r\n            });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"sign\">\r\n\t\t\t\t<label>Введите данные для входа</label>\r\n\t\t\t\t<div className=\"error\">{this.state.loginError}</div>\r\n\t\t\t\t<form  onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t<li><label htmlFor=\"login\">Имя</label>\r\n\t\t\t\t\t\t\t<input type=\"text\" name=\"login\" value={this.state.login} onChange={this.handleChange}/></li>\r\n\t\t\t\t\t\t<li><label htmlFor=\"password\">Пароль</label>\r\n\t\t\t\t\t\t\t<input type=\"password\" name=\"password\" value={this.state.password} onChange={this.handleChange}/></li>\r\n\t\t\t\t\t\t\t<label>Роль</label>\r\n\t\t\t\t\t\t<li id=\"radio\"><input type=\"radio\" id=\"teach\" name=\"role\" value=\"teacher\" onChange={this.handleChange}/>\r\n\t\t\t\t\t\t\t<label htmlFor=\"teach\">Учитель</label>\r\n\t\t\t\t\t\t\t<input type=\"radio\"/>\r\n\t\t\t\t\t\t\t<label> / </label>\r\n\t\t\t\t\t\t\t<input type=\"radio\" id=\"stud\" name=\"role\"  value=\"student\" onChange={this.handleChange}/>\r\n\t\t\t\t\t\t\t<label htmlFor=\"stud\">Ученик</label></li>\r\n\t\t\t\t\t\t<li><button type=\"submit\">Войти</button></li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}