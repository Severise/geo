{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\julia\\\\Desktop\\\\geo\\\\geo\\\\src\\\\pages\\\\Login.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport * as jwt_decode from 'jwt-decode';\nexport default class Sign extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      login: \"\",\n      password: \"\",\n      role: \"teacher\",\n      school: \"\",\n      name: \"\",\n      loginError: \"\"\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    var radio = document.getElementsByName('form');\n\n    for (var i = 0; i < radio.length; i++) {\n      if (radio[i].checked) {\n        var path = radio[i].value;\n      }\n    }\n\n    return;\n\n    if (this.state.role === '') {\n      this.setState({\n        loginError: \"Выберите роль\"\n      });\n      return;\n    }\n\n    var params;\n\n    if (path == '/signin') {\n      params = {\n        login: this.state.login,\n        password: this.state.password,\n        role: this.state.role\n      };\n    } else {\n      params = {\n        name: this.state.name,\n        login: this.state.login,\n        password: this.state.password,\n        school: this.state.school\n      };\n    }\n\n    axios.post(path, params).then(res => {\n      localStorage.setItem('token', res.data);\n      var token = jwt_decode(res.data);\n\n      if (token.class) {\n        this.props.history.push({\n          pathname: `/student`,\n          state: {\n            user: token\n          }\n        });\n      } else if (token.school) {\n        this.props.history.push({\n          pathname: `/teacher`,\n          state: {\n            user: token\n          }\n        });\n      }\n    }).catch(error => {\n      this.setState({\n        loginError: \"User not found\"\n      });\n    });\n  }\n\n  render() {\n    return (\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        id: \"form\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 4\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        type: \"radio\",\n        id: \"signin\",\n        name: \"form\",\n        value: \"\",\n        defaultChecked: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        htmlFor: \"signin\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }\n      }, \"\\u0412\\u0445\\u043E\\u0434\"),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        id: \"sign\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 25\n        }\n      }, \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0434\\u043B\\u044F \\u0432\\u0445\\u043E\\u0434\\u0430\"),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"error\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 25\n        }\n      }, this.state.loginError),\n      /*#__PURE__*/\n      React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 25\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"ul\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 29\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 33\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        htmlFor: \"login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 37\n        }\n      }, \"\\u041B\\u043E\\u0433\\u0438\\u043D\"),\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        type: \"text\",\n        name: \"login\",\n        value: this.state.login,\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 37\n        }\n      })),\n      /*#__PURE__*/\n      React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 33\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        htmlFor: \"password\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 37\n        }\n      }, \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"),\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        value: this.state.password,\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 37\n        }\n      })),\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 37\n        }\n      }, \"\\u0420\\u043E\\u043B\\u044C\"),\n      /*#__PURE__*/\n      React.createElement(\"li\", {\n        className: \"radio\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 33\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        type: \"radio\",\n        id: \"teach\",\n        name: \"role\",\n        value: \"teacher\",\n        onChange: this.handleChange,\n        defaultChecked: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 55\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        htmlFor: \"teach\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 37\n        }\n      }, \"\\u0423\\u0447\\u0438\\u0442\\u0435\\u043B\\u044C\"),\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        type: \"radio\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 37\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 37\n        }\n      }, \" / \"),\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        type: \"radio\",\n        id: \"stud\",\n        name: \"role\",\n        value: \"student\",\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 37\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        htmlFor: \"stud\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 37\n        }\n      }, \"\\u0423\\u0447\\u0435\\u043D\\u0438\\u043A\")),\n      /*#__PURE__*/\n      React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 33\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"button\", {\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 37\n        }\n      }, \"\\u0412\\u043E\\u0439\\u0442\\u0438\"))))),\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }\n      }, \" / \"),\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        type: \"radio\",\n        id: \"signup\",\n        name: \"form\",\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        htmlFor: \"signup\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }\n      }, \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        id: \"reg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 17\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }\n      }, \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\"),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"error\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }\n      }, this.state.loginError),\n      /*#__PURE__*/\n      React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"ul\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 25\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 29\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        htmlFor: \"name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 33\n        }\n      }, \"\\u0418\\u043C\\u044F\"),\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        type: \"text\",\n        name: \"login\",\n        value: this.state.name,\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 33\n        }\n      })),\n      /*#__PURE__*/\n      React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 29\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        htmlFor: \"login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 33\n        }\n      }, \"\\u041B\\u043E\\u0433\\u0438\\u043D\"),\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        type: \"text\",\n        name: \"login\",\n        value: this.state.login,\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 33\n        }\n      })),\n      /*#__PURE__*/\n      React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 29\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        htmlFor: \"password\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 33\n        }\n      }, \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"),\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        value: this.state.password,\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 33\n        }\n      })),\n      /*#__PURE__*/\n      React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 29\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        htmlFor: \"school\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 33\n        }\n      }, \"\\u0428\\u043A\\u043E\\u043B\\u0430\"),\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        type: \"text\",\n        name: \"school\",\n        value: this.state.school,\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 33\n        }\n      })),\n      /*#__PURE__*/\n      React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 29\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"button\", {\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 33\n        }\n      }, \"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"))))))\n    );\n  }\n\n}","map":{"version":3,"sources":["C:/Users/julia/Desktop/geo/geo/src/pages/Login.js"],"names":["React","Component","axios","jwt_decode","Sign","constructor","props","state","login","password","role","school","name","loginError","handleSubmit","bind","handleChange","event","setState","target","value","preventDefault","radio","document","getElementsByName","i","length","checked","path","params","post","then","res","localStorage","setItem","data","token","class","history","push","pathname","user","catch","error","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport * as jwt_decode from 'jwt-decode';\r\n\r\nexport default class Sign extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tlogin: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t\trole: \"teacher\",\r\n\t\t\tschool: \"\",\r\n\t\t\tname: \"\",\r\n\t\t\tloginError: \"\",\r\n\r\n\t\t};\r\n\r\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\r\n\t\tthis.handleChange = this.handleChange.bind(this);\r\n\t}\r\n\r\n\thandleChange(event) {\r\n\t\tthis.setState({\r\n\t\t\t[event.target.name]: event.target.value\r\n\t\t});\r\n\t}\r\n\r\n\thandleSubmit(event) {\r\n\t\tevent.preventDefault();\r\n\t\tvar radio = document.getElementsByName('form');\r\n\t\tfor (var i = 0; i < radio.length; i++) {\r\n\t\t\tif (radio[i].checked) {\r\n\t\t\t\tvar path = radio[i].value;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn\r\n\t\tif (this.state.role === '') {\r\n\t\t\tthis.setState({\r\n\t\t\t\tloginError: \"Выберите роль\"\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar params;\r\n\t\tif (path == '/signin') {\r\n\t\t\tparams = {\r\n\t\t\t\tlogin: this.state.login,\r\n\t\t\t\tpassword: this.state.password,\r\n\t\t\t\trole: this.state.role\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tparams = {\r\n\t\t\t\tname: this.state.name,\r\n\t\t\t\tlogin: this.state.login,\r\n\t\t\t\tpassword: this.state.password,\r\n\t\t\t\tschool: this.state.school\r\n\t\t\t};\r\n\t\t}\r\n\t\taxios\r\n\t\t\t.post(path, params)\r\n\t\t\t.then(res => {\r\n\t\t\t\tlocalStorage.setItem('token', res.data);\r\n\t\t\t\tvar token = jwt_decode(res.data);\r\n\t\t\t\tif (token.class) {\r\n\t\t\t\t\tthis.props.history.push({\r\n\t\t\t\t\t\tpathname: `/student`,\r\n\t\t\t\t\t\tstate: {\r\n\t\t\t\t\t\t\tuser: token\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (token.school) {\r\n\t\t\t\t\tthis.props.history.push({\r\n\t\t\t\t\t\tpathname: `/teacher`,\r\n\t\t\t\t\t\tstate: {\r\n\t\t\t\t\t\t\tuser: token\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tloginError: \"User not found\"\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div id=\"form\">\r\n                    <input type=\"radio\" id=\"signin\" name=\"form\" value=\"\" defaultChecked />\r\n                    <label htmlFor=\"signin\">Вход</label>\r\n                    <div id=\"sign\">\r\n                        <label>Введите данные для входа</label>\r\n                        <div className=\"error\">{this.state.loginError}</div>\r\n                        <form onSubmit={this.handleSubmit}>\r\n                            <ul>\r\n                                <li><label htmlFor=\"login\">Логин</label>\r\n                                    <input type=\"text\" name=\"login\" value={this.state.login} onChange={this.handleChange} /></li>\r\n                                <li><label htmlFor=\"password\">Пароль</label>\r\n                                    <input type=\"password\" name=\"password\" value={this.state.password} onChange={this.handleChange}/></li>\r\n                                    <label>Роль</label>\r\n                                <li className=\"radio\"><input type=\"radio\" id=\"teach\" name=\"role\" value=\"teacher\" onChange={this.handleChange} defaultChecked />\r\n                                    <label htmlFor=\"teach\">Учитель</label>\r\n                                    <input type=\"radio\"/>\r\n                                    <label> / </label>\r\n                                    <input type=\"radio\" id=\"stud\" name=\"role\"  value=\"student\" onChange={this.handleChange}/>\r\n                                    <label htmlFor=\"stud\">Ученик</label></li>\r\n                                <li><button type=\"submit\">Войти</button></li>\r\n                            </ul>\r\n                        </form>\r\n                    </div>  \r\n                    <label> / </label>\r\n                    <input type=\"radio\" id=\"signup\" name=\"form\" value=\"\"/>\r\n                    <label htmlFor=\"signup\">Регистрация</label>\r\n                <div id=\"reg\">\r\n                    <label>Введите данные</label>\r\n                    <div className=\"error\">{this.state.loginError}</div>\r\n                    <form  onSubmit={this.handleSubmit}>\r\n                        <ul>\r\n                            <li><label htmlFor=\"name\">Имя</label>\r\n                                <input type=\"text\" name=\"login\" value={this.state.name} onChange={this.handleChange}/></li> \r\n                            <li><label htmlFor=\"login\">Логин</label>\r\n                                <input type=\"text\" name=\"login\" value={this.state.login} onChange={this.handleChange}/></li>\r\n                            <li><label htmlFor=\"password\">Пароль</label>\r\n                                <input type=\"password\" name=\"password\" value={this.state.password} onChange={this.handleChange}/></li>\r\n                            <li><label htmlFor=\"school\">Школа</label>\r\n                                <input type=\"text\" name=\"school\" value={this.state.school} onChange={this.handleChange}/></li>\r\n                                \r\n                            <li><button type=\"submit\">Зарегистрироваться</button></li>\r\n                        </ul>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n\t\t\t);\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}